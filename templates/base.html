{% load static %}

<!doctype html>
<html lang="en">

<head>

  {% block meta %}
  <!-- Google verification -->
  <meta name="google-site-verification" content="4dxQqo5pXASAT3ttjfEVtciwkvLvieiTYRD_T2Bqq6g" />
  <!-- Robots File -->
  <link rel="robots" href="{% static 'robots.txt' %}">
  <!-- Meta Tags -->
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  {% endblock %}

  <!-- Dynamic title and meta tags -->
  <title>{% block title %}{% endblock %}-MagnaPlate</title>
  <meta name="keywords" content="{% block meta_keywords %}
  MagnaPlate, magnetic posters, home decor, wall art, magnetic wall posters, 
  easy wall decor, interchangeable posters, stylish home decorations, 
  magnetic wall art{% endblock %}">
  <meta name="description" content="{% block meta_description %}
  Discover MagnaPlate - your ultimate destination for stylish and versatile 
  magnetic posters. Easily hang and swap your metallic posters with our 
  innovative magnetic system. Elevate your home decor effortlessly with 
  MagnaPlate{% endblock %}">
  

  <!-- Favicon Links -->
  <link rel="apple-touch-icon" sizes="180x180" href="{% static 'favicon/apple-touch-icon.png' %}">
  <link rel="icon" type="image/png" sizes="32x32" href="{% static 'favicon/favicon-32x32.png' %}">
  <link rel="icon" type="image/png" sizes="16x16" href="{% static 'favicon/favicon-16x16.png' %}">
  <link rel="manifest" href="{% static 'favicon/site.webmanifest' %}">

  {% block extra_meta %}
  {% endblock %}

  {% block corecss %}
  <!-- Core CSS -->
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">

  <!-- Google Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Galada&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Signika+Negative&display=swap" rel="stylesheet">

  <!-- Static CSS -->
  <link rel="stylesheet" href="{% static 'base/css/base.css' %}">

  <!-- MDB UI Kit -->
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/mdb-ui-kit/7.1.0/mdb.min.css" rel="stylesheet">

  {% endblock %}

  {% block extra_css %}
  {% endblock %}

  {% block corejs %}
  <!-- Core JavaScript -->
  <!-- FontAwesome -->
  <script src="https://kit.fontawesome.com/12401a2841.js" crossorigin="anonymous"></script>

  <!-- Static JavaScript -->
  <script type="module" src="{% static 'base/js/base.js' %}"></script>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.7.1.js" integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
    crossorigin="anonymous"></script>

  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4JQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
    crossorigin="anonymous"></script>

  <!-- Additional jQuery and Bootstrap JS for older versions -->
  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
    integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.6/dist/umd/popper.min.js"
    integrity="sha384-wHAiFfRlMFy6i5SRaxvfOCifBUQy1xHdJ/yoi7FRNXMRBu5WHdZYu1hA6ZOblgut"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.2.1/dist/js/bootstrap.min.js"
    integrity="sha384-B0UglyR+jN6CkvvICOB2joaf5I4l3gm9GU6Hc1og6Ls7i6U/mkkaduKaBhlAXv9k"
    crossorigin="anonymous"></script>

  <!-- Stripe -->
  <script src="https://js.stripe.com/v3/"></script>
  {% endblock %}

  {% block extra_js %}
  {% endblock %}
</head>

<body class="d-flex flex-column">

  <!-- Header -->
  <header class="container-fluid sticky-top bg-light-subtle border-bottom my-auto pt-1">
    <div class="row border-bottom">
      <!-- Logo and Home Link -->
      <div class="text-center col-12 col-lg-3 my-auto">
        <a class="navbar-brand" href="{% url 'home' %}">
          <h2 class="navbar-brand logo-font text-black fs-1 my-0">
            <strong>Magna</strong>Plate
          </h2>
        </a>
      </div>

      <!-- Search Bar -->
      <div class="col-12 col-lg-6 my-auto d-none d-lg-block">
        <form class="d-flex input-group" role="search" method="get" action="{% url 'products' %}">
          <input class="form-control me-0 rounded-start-4" type="search" name="q" placeholder="Search"
            aria-label="Search" value="{{ search_term }}">
          <button class="btn btn-light border rounded-end-4 mx-0" type="submit">Search</button>
        </form>
      </div>

      <!-- User and Cart Links -->
      <div class="col-12 col-lg-3 my-auto d-flex justify-content-end d-none d-lg-block">
        <ul class="nav justify-content-end">
          <!-- User Dropdown -->
          <li class="nav-item dropdown">
            <a class="nav-link dropdown text-center text-black" data-bs-toggle="dropdown" href="#" role="button"
              aria-expanded="false">
              <i class="fa-regular fa-user fa-lg"></i>
              {% if request.user.is_authenticated %}
              <p class="my-0">{{ user.username|capfirst }}</p>
              {% else %}
              <p class="my-0">User</p>
              {% endif %}
            </a>
            <ul class="dropdown-menu">
              {% if request.user.is_authenticated %}
              {% if request.user.is_superuser %}
              <li><a class="dropdown-item" href="{% url 'site_management' %}">Site Management</a></li>
              {% endif %}
              <li><a class="dropdown-item" href="{% url 'profile' %}">My Profile</a></li>
              <li><a class="dropdown-item" href="{% url 'favorites:favorite_list' %}">My Favorites</a></li>
              <li><a class="dropdown-item" href="{% url 'account_logout' %}">Logout</a></li>
              {% else %}
              <li><a class="dropdown-item" href="{% url 'account_login' %}">Login</a></li>
              <li><a class="dropdown-item" href="{% url 'account_signup' %}">Register</a></li>
              {% endif %}
            </ul>
          </li>
          <!-- Cart Link -->
          <li class="nav-item d-flex flex-column align-items-center">
            <a class="{% if grand_total %}text-primary font-weight-bold{% else %}text-black{% endif %} nav-link" href="{% url 'view_cart' %}">
              <div class="text-center cart-icon">
                <i class="fa-solid fa-cart-shopping"></i>
                <p class="my-0 text-center fs-6 fs-md-5">
                  {% if grand_total %}
                    €{{ grand_total|floatformat:2 }}
                  {% else %}
                    €0.00
                  {% endif %}
                </p>
              </div>
            </a>
          </li>          
        </ul>
      </div>
    </div>

    <!-- Mobile Header -->
    <menu class="row border-bottom justify-content-between p-0 d-lg-none">
      {% include 'includes/mobile-header.html' %}
    </menu>

    <!-- Main Navigation -->
    <div class="row bg-light-subtle">
      <nav class="navbar navbar-expand-lg p-0 w-100">
        {% include 'includes/main-nav.html' %}
      </nav>
    </div>

    <!-- Top Banner -->
    <div id="top-banner" class="row text-center">
      <div class="col bg-light-subtle text-center text-black">
        <h5 class="logo-font my-1">Free delivery on orders over €{{ free_delivery_limit }}!</h5>
      </div>
    </div>
  </header>

  <!-- Flash Messages -->
  {% if messages %}
  <div class="message-container">
    {% for message in messages %}
    {% with message.level as level %}
    {% if level == 40 %}
    {% include 'includes/toasts/toast_error.html' %}
    {% elif level == 30 %}
    {% include 'includes/toasts/toast_warning.html' %}
    {% elif level == 25 %}
    {% include 'includes/toasts/toast_success.html' %}
    {% else %}
    {% include 'includes/toasts/toast_info.html' %}
    {% endif %}
    {% endwith %}
    {% endfor %}
  </div>
  {% endif %}

  <!-- Main Content -->
  <main class="mb-2">
    {% block content %}
    {% endblock %}
  </main>

  <!-- Footer -->
  <footer class="border-top mt-auto pt-3 footer">
    {% include 'footer/footer.html' %}
  </footer>

  {% block postloadjs %}
  {% endblock %}

</body>

</html>
